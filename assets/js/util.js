window.$util={async _f(p){const r=await fetch(p,{cache:'no-store'});if(!r.ok)throw 0;return r.text()},csv(t){const L=t.split(/\r?\n/).filter(Boolean);if(!L.length)return[];const H=L.shift().split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/).map(h=>h.replace(/^"|"$/g,''));return L.map(r=>{const C=r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/).map(c=>c.replace(/^"|"$/g,''));const o={};H.forEach((h,i)=>o[h]=C[i]||'');return o})},async loadCSV(p){for(const x of p){try{return this.csv(await this._f(x))}catch(_){}}throw 0},async loadJSON(p){for(const x of p){try{return JSON.parse(await this._f(x))}catch(_){}}throw 0},async loadIndex(){try{return await this.loadCSV(['./assets/data/MasterIndex.csv','./data/MasterIndex.csv'])}catch(_){return await this.loadJSON(['./assets/data/master_index.json','./data/master_index.json'])}},async loadRecipes(){try{return await this.loadCSV(['./assets/data/MasterRecipes.csv','./data/MasterRecipes.csv'])}catch(_){return await this.loadJSON(['./assets/data/master_recipes.json','./data/master_recipes.json'])}},safe:v=>v==null?'':v,err(m){let e=document.getElementById('errorBanner');if(!e){e=document.createElement('div');e.id='errorBanner';e.style.cssText='background:#fee;border:1px solid #f99;color:#600;padding:10px;border-radius:10px;margin:8px 0';document.querySelector('.page')?.prepend(e)}e.innerHTML=m}};