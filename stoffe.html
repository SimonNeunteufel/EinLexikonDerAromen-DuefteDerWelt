<!doctype html><html lang='de'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Stoffe – Suche</title><link rel='stylesheet' href='./assets/css/styles.css'></head><body class='BG3'><div class='page'>
<div class='header'><button class='btn' onclick="location.href='./index.html'">← Zurück</button><div class='brand'>Stoffe – Suchtabelle</div><nav class='nav'><a href='./stoffe.html'>Stoffe</a><a href='./mischungen.html'>Mischungen</a><a href='./baender.html'>Bände</a></nav></div>
<p class='sub'>Gewürze, Kräuter, Salze, Harze/Hölzer, Tees/Infusionen, Räucherstoffe.</p>
<div class='toolbar'><input id='q' placeholder='Suche (Name, Kategorie, Region …)' type='search'><button class='btn' id='go'>Suchen</button><button class='btn' id='toHtml'>Datasheets → HTML</button><button class='btn' id='toPdf'>Datasheets → PDF</button><label style='margin-left:auto'><input type='checkbox' id='all'> Alles wählen</label></div>
<div class='badges' id='info'></div>
<div class='table-wrap'><div class='table-body'><table id='t'><thead></thead><tbody></tbody></table></div></div>
<div class='footer-note'><div>© Lexikon</div><div><a href='./index.html'>Start</a></div></div>
</div><script src='./assets/js/util.js'></script><script src='./assets/js/bg_loader.js'></script>
<script>(async()=>{let data=[];try{data=await $util.loadIndex()}catch(_){$util.err('Daten konnten nicht geladen werden. Lege <code>MasterIndex.csv</code> oder <code>master_index.json</code> in <code>/assets/data/</code> oder <code>/data/</code> ab.')}const K=Object.keys(data[0]||{}),show=["Name","Kategorie","EntityType","Region","Land","Kontinent","SensorikProfil","PhysikalischeForm","Quelle"].filter(c=>K.includes(c));const H=document.querySelector('#t thead');H.innerHTML="<tr><th><input id='hd' type='checkbox'></th>"+show.map(c=>`<th>${c}</th>`).join('')+"</tr>";const B=document.querySelector('#t tbody'),I=document.getElementById('info'),S=$util.safe,ID=r=>r.ID_Neu||r.id||'',RN=r=>r.Name||r['Lateinischer Name/Typ']||ID(r)||'(ohne Name)';function render(rows){B.innerHTML=rows.map(r=>`<tr><td><input class='sel' type='checkbox' data-id='${ID(r)}' data-name='${S(RN(r))}'></td>`+show.map(c=>`<td>${S(r[c])}</td>`).join('')+`</tr>`).join('');upd()}function search(){const s=document.getElementById('q').value.trim().toLowerCase();render(!s?data:data.filter(r=>Object.values(r).some(v=>(S(v)+'').toLowerCase().includes(s))))}function chosen(){const a=[];document.querySelectorAll('input.sel:checked').forEach(x=>a.push({id:x.dataset.id,name:x.dataset.name}));return a}function upd(){const a=chosen();I.innerHTML=a.map(x=>`<span class='badge'>${x.name}</span>`).join('')}document.getElementById('go').onclick=search;document.getElementById('q').addEventListener('keydown',e=>{if(e.key==='Enter')search()});document.addEventListener('change',e=>{if(e.target.classList.contains('sel'))upd()});document.getElementById('hd').addEventListener('change',e=>{document.querySelectorAll('input.sel').forEach(x=>x.checked=e.target.checked);upd()});document.getElementById('all').addEventListener('change',e=>{document.querySelectorAll('input.sel').forEach(x=>x.checked=e.target.checked);upd()});document.getElementById('toHtml').onclick=()=>{const ids=chosen().map(x=>x.id).filter(Boolean);if(!ids.length)return alert('Bitte Stoff(e) auswählen.');window.open(`./stoff_datasheet.html?ids=${encodeURIComponent(ids.join(','))}`,'_blank')};document.getElementById('toPdf').onclick=()=>{const ids=chosen().map(x=>x.id).filter(Boolean);if(!ids.length)return alert('Bitte Stoff(e) auswählen.');window.open(`./stoff_datasheet.html?ids=${encodeURIComponent(ids.join(','))}&print=1`,'_blank')};render(data);})();</script>
</body></html>