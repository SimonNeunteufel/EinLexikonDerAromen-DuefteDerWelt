<!doctype html><html lang='de'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Mischungen – Suche</title><link rel='stylesheet' href='./assets/css/styles.css'></head><body class='BG4'><div class='page'>
<div class='header'><button class='btn' onclick="location.href='./index.html'">← Zurück</button><div class='brand'>Mischungen – Suchtabelle</div><nav class='nav'><a href='./stoffe.html'>Stoffe</a><a href='./mischungen.html'>Mischungen</a><a href='./baender.html'>Bände</a></nav></div>
<p class='sub'>Mit Varianten- und Rezeptbezug.</p>
<div class='toolbar'><input id='q' placeholder='Suche (Name, Kategorie, Region …)' type='search'><button class='btn' id='go'>Suchen</button><button class='btn' id='toHtml'>Rezepte → HTML</button><button class='btn' id='toPdf'>Rezepte → PDF</button><label style='margin-left:auto'><input type='checkbox' id='all'> Alles wählen</label></div>
<div class='table-wrap'><div class='table-body'><table id='t'><thead></thead><tbody></tbody></table></div></div>
<div class='footer-note'><div>© Lexikon</div><div><a href='./index.html'>Start</a></div></div>
</div><script src='./assets/js/util.js'></script><script src='./assets/js/bg_loader.js'></script>
<script>(async()=>{let data=[];try{data=await $util.loadRecipes()}catch(_){$util.err('Daten konnten nicht geladen werden. Lege <code>MasterRecipes.csv</code> oder <code>master_recipes.json</code> in <code>/assets/data/</code> oder <code>/data/</code> ab.')}const K=Object.keys(data[0]||{}),show=["Mix_Name","Kategorie","Mix_Typ","SensorikProfil","PhysikalischeForm","Region","Land","Quelle","Source"].filter(c=>K.includes(c));const H=document.querySelector('#t thead');H.innerHTML="<tr><th><input id='hd' type='checkbox'></th>"+show.map(c=>`<th>${c}</th>`).join('')+"</tr>";const B=document.querySelector('#t tbody'),S=$util.safe,ID=r=>r.ID_Neu||r.Recipe_ID||r.Rezept_ID||r.id||'';function render(rows){B.innerHTML=rows.map(r=>`<tr><td><input class='sel' type='checkbox' data-id='${ID(r)}'></td>`+show.map(c=>`<td>${S(r[c])}</td>`).join('')+`</tr>`).join('')}function search(){const s=document.getElementById('q').value.trim().toLowerCase();render(!s?data:data.filter(r=>Object.values(r).some(v=>(S(v)+'').toLowerCase().includes(s))))}document.getElementById('go').onclick=search;document.getElementById('q').addEventListener('keydown',e=>{if(e.key==='Enter')search()});document.getElementById('hd').addEventListener('change',e=>{document.querySelectorAll('input.sel').forEach(x=>x.checked=e.target.checked)});document.getElementById('all').addEventListener('change',e=>{document.querySelectorAll('input.sel').forEach(x=>x.checked=e.target.checked)});document.getElementById('toHtml').onclick=()=>{const ids=[...document.querySelectorAll('input.sel:checked')].map(x=>x.dataset.id).filter(Boolean);if(!ids.length)return alert('Bitte Mischung(en) auswählen.');window.open(`./mischung_rezepte.html?ids=${encodeURIComponent(ids.join(','))}`,'_blank')};document.getElementById('toPdf').onclick=()=>{const ids=[...document.querySelectorAll('input.sel:checked')].map(x=>x.dataset.id).filter(Boolean);if(!ids.length)return alert('Bitte Mischung(en) auswählen.');window.open(`./mischung_rezepte.html?ids=${encodeURIComponent(ids.join(','))}&print=1`,'_blank')};render(data);})();</script>
</body></html>